<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>天体运行模拟</title>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        canvas {
            background: #000;
            display: block;
            margin: 20px auto;
            border: 1px solid #444;
        }

        .controls {
            margin: 10px;
        }

        button {
            margin: 0 5px;
            padding: 6px 12px;
        }
        select {
            padding: 6px;
            margin: 0 6px;
        }
    </style>
</head>
<body>
    <h1>天体运行模拟 - 俯视图</h1>
    <canvas id="universe" width="900" height="600"></canvas>
    <div class="controls">
        <button onclick="toggleAnimation()">暂停/继续</button>
        <label for="viewSelector">选择视角：</label>
        <select id="viewSelector" onchange="switchView()">
            <option value="index.html"selected>俯视图</option>
            <option value="perspectiveview.html" > 侧视图</option>
        </select>
    </div>

    <script>
        const canvas = document.getElementById("universe");
        const ctx = canvas.getContext("2d");

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        let running = true;
        let time = 0;

        // 天体参数
        const sun = { radius: 40, color: "yellow" };
        const earth = {
            orbitRadius: 200,
            radius: 15,
            color: "blue",
            orbitSpeed: 0.01, // 公转速度
            rotateSpeed: 0.1  // 自转速度（用角度表示）
        };
        const moon = {
            orbitRadius: 40,
            radius: 5,
            color: "gray",
            orbitSpeed: 0.05,
            rotateSpeed: 0.2
        };

        function drawPlanet(x, y, radius, color, label) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, 2 * Math.PI);
            ctx.fillStyle = color;
            ctx.fill();
            ctx.strokeStyle = "#ccc";
            ctx.stroke();
            ctx.fillStyle = "white";
            ctx.font = "12px sans-serif";
            ctx.fillText(label, x + radius + 5, y);
        }

        function drawOrbit(radius) {
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = "rgba(255,255,255,0.2)";
            ctx.stroke();
        }

        function drawScene() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 太阳（不动，自转）
            drawPlanet(centerX, centerY, sun.radius, sun.color, "太阳");

            // 画地球轨道
            drawOrbit(earth.orbitRadius);

            // 地球位置
            const earthAngle = time * earth.orbitSpeed;
            const earthX = centerX + earth.orbitRadius * Math.cos(earthAngle);
            const earthY = centerY + earth.orbitRadius * Math.sin(earthAngle);
            drawPlanet(earthX, earthY, earth.radius, earth.color, "地球");

            // 画月球轨道
            drawOrbit(earth.orbitRadius + moon.orbitRadius); // 简化，绕太阳画轨

            // 月球位置（绕地球转）
            const moonAngle = time * moon.orbitSpeed;
            const moonX = earthX + moon.orbitRadius * Math.cos(moonAngle);
            const moonY = earthY + moon.orbitRadius * Math.sin(moonAngle);
            drawPlanet(moonX, moonY, moon.radius, moon.color, "月球");
        }

        function animate() {
            if (running) {
                time += 1;
                drawScene();
            }
            requestAnimationFrame(animate);
        }

        function toggleAnimation() {
            running = !running;
        }

        function switchView() {
            const view = document.getElementById("viewSelector").value;
            window.location.href = view;
        }
        // 启动动画
        animate();
    </script>
</body>
</html>
